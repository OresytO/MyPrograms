<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd" start-state="deliveryType">

    <secured attributes="ROLE_USER" />

    <on-start>
        <evaluate expression="userService.getAllUsersMap()" result="flowScope.users" />
    </on-start>

    <view-state id="deliveryType" view="user_deliveryType">
        <transition on="next" to="dates" />
        <!-- <transition on="get" to="getflow" /> -->
    </view-state>

    <!-- <action-state id="getflow"> <evaluate expression="userService.getAllUsers()" result="flowScope.users" /> <transition to="firstflow" /> </action-state> -->

    <view-state id="dates" model="user" view="user_dates">
        <transition on="next" to="places" />
        <transition on="prev" to="deliveryType" />
        <transition on="startOver" to="deliveryType" />
    </view-state>

    <view-state id="places" view="user_places">
        <transition on="next" to="contacts" />
        <transition on="prev" to="dates" />
        <transition on="startOver" to="deliveryType" />
    </view-state>

    <view-state id="contacts" view="user_contacts">
        <transition on="next" to="sizeAndWeight" />
        <transition on="prev" to="places" />
        <transition on="startOver" to="deliveryType" />
    </view-state>

    <view-state id="sizeAndWeight" view="user_sizeAndWeight">
        <transition on="next" to="endflow" />
        <transition on="prev" to="contacts" />
        <transition on="startOver" to="deliveryType" />
    </view-state>

    <end-state id="endflow" view="end" />
</flow>